---
title: "Obtain user signatures"
slug: "/guides-new/user-signatures"
keywords: [imx-wallets, imx-dx]
---

User signatures are required for certain types of operations on Immutable X. These are:
1. Transactions that update blockchain state
2. Operations that update Immutable X's databases that require user authorization for

#### Examples:
<table>
  <tbody>
    <tr>
      <th colspan="2">✅ Require user signatures</th>
      <th>❌ Do not require user signatures</th>
    </tr>
    <tr>
      <th>Transactions that update<br/>blockchain state</th>
      <th>Operations requiring user<br/>authorization</th>
      <th><a href="/docs/guides-new/getting-data">Read-only operations</a></th>
    </tr>
    <tr>
      <td>
        <ul>
          <li>Creating an order</li>
          <li>Filling an order (creating a trade)</li>
          <li>Transferring assets between users</li>
          <li>Depositing assets on L2 (Immutable X)</li>
          <li>Withdrawing assets to L1 (Layer 1 Ethereum)</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Creating a project</li>
          <li>Registering a user off-chain</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>Getting a list of all assets on Immutable X</li>
          <li>Getting the details (ie. metadata) of a particular asset</li>
          <li>Getting a list of all open orders</li>
          <li>Getting a list of historical trades</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

In order to get user signatures, applications need to [generate "signers"](#how-do-applications-generate-and-use-signers).

### How do applications generate and use signers?

Signers are abstractions of user accounts that can be used to sign transactions. A user's private key is required to generate them.

There are two ways to get signers in your application:
1. [Generate your own by obtaining and using the user's private keys](#generate-your-own-signers)
2. [Connect to a user's wallet application](#connect-to-users-wallets)

The first option, where an application obtains a user's private key directly, is risky because these keys allow anyone in possession of them full control of an account.

The second option provides an application with an interface to the user's account by prompting the user to connect with their wallet application (ie. mobile or browser wallet). Once connected the app can begin asking the user to sign transactions and messages without having to reveal their private key.

As Immutable X enables applications to execute signed transactions on both Ethereum (layer 1) and StarkEx (layer 2), signers are required for both these layers.

## Generate your own signers

The Core SDK provides functionality that enable applications to generate:
1. Stark (L2) private keys
2. Ethereum (L1) and Stark (L2) signers

:::caution
If you generate your own Stark private key, you will have to persist it. The key is randomly generated so **_cannot_** be deterministically re-generated.
:::

#### Guide for:
* [Typescript Core SDK](#typescript-core-sdk)
* [Kotlin (JVM) Core SDK](#kotlin-jvm-core-sdk)
* [Swift Core SDK](#swift-core-sdk)
* [Golang Core SDK](#golang-core-sdk)

#### Typescript Core SDK
<!-- From [here](https://github.com/immutable/imx-core-sdk/edit/main/README.md). -->

The Typescript Core SDK provides `WalletConnection`, which is a top-level connector which contains all the required resources (eg. L1 and L2 signers) to enable usage of the Core SDK workflows.

```ts
import { AlchemyProvider } from '@ethersproject/providers';
import { Wallet } from '@ethersproject/wallet';
import { WalletConnection, generateStarkWallet, BaseSigner } from '@imtbl/core-sdk';

// Generate your own WalletConnection
const generateWalletConnection = async (provider: AlchemyProvider) : Promise<WalletConnection> => {
  // L1 credentials
  const l1Signer = Wallet.createRandom().connect(provider);

  // L2 credentials
  const starkWallet = await generateStarkWallet(l1Signer);
  const l2Signer = new BaseSigner(starkWallet.starkKeyPair);

  return {
    l1Signer,
    l2Signer,
  };
};
```

#### Kotlin (JVM) Core SDK
<!-- From [here](https://docs.x.immutable.com/sdk-docs/core-sdk-kotlin/sdk-functions#wallet-connection). -->

In order to use any workflow functions, you will need to pass in the connected wallet provider. This means you will need to implement your own Wallet L1 Signer.

Once you have created a Signer instance you can generate the user's Stark key pair and use it to create an instance of StandardStarkSigner, an implementation of StarkSigner.

```java
StarkKey.generate(signer).whenComplete { keyPair, error ->
    val starkSigner = StandardStarkSigner(keyPair)
}
```

#### Swift Core SDK
<!-- From [here](https://docs.x.immutable.com/sdk-docs/core-sdk-swift/sdk-functions#wallet-connection). -->

In order to use any workflow functions, you will need to pass in the connected wallet provider. This means you will need to implement your own Wallet L1 [Signer](https://github.com/immutable/imx-core-sdk-swift/blob/main/Sources/ImmutableXCore/Signer.swift) and L2 [StarkSigner](https://github.com/immutable/imx-core-sdk-swift/blob/main/Sources/ImmutableXCore/Signer.swift).

Once you have a `Signer` instance you can generate the user's Stark key pair and use the result to instantiate a StarkSigner, for example, by using the default `StandardStarkSigner` provided by the SDK.

```
let keyPair = try await StarkKey.generateKeyPair(from: signer)
let starkSigner = StandardStarkSigner(pair: keyPair)
```

#### Golang Core SDK
[Add info]

## Connect to users' wallets
Your application can facilitate signing of user transactions by connecting to users' wallet applications. This ensures that you do not have to handle private keys.

| Settlement layer | How?                           |
| ---------------- | ------------------------------ |
| StarkEx          | [Using the Wallet SDK](#using-the-wallet-sdk)           |
| StarkNet         | [Using the get-starknet library](#using-the-get-starknet-library) |

### Using the Wallet SDK
The Wallet SDK provides a way for applications to connect to certain user wallets:
<table>
  <tbody>
    <tr>
      <th>Wallet SDK</th>
      <th>Platform</th>
      <th>Wallets supported</th>
    </tr>
    <tr>
      <td><a href='https://github.com/immutable/imx-wallet-sdk-web/'>Wallet SDK Web</a></td>
      <td>Web</td>
      <td>
        <ul>
          <li>Metamask</li>
          <li>WalletConnect</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><a href='https://github.com/immutable/imx-wallet-sdk-android/'>Wallet SDK Android</a></td>
      <td>Android</td>
      <td>
        <ul>
          <li>Metamask and Rainbow via Wallet Connect</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


#### Guide for:
* [Wallet SDK Web](#)
* [Wallet SDK Android](#)

#### Wallet SDK Web
<!-- From [here](https://docs.x.immutable.com/sdk-docs/wallet-sdk-web/quickstart). -->

```ts
import {
  ENVIRONMENTS,
  L1_PROVIDERS,
  WalletSDK,
} from '@imtbl/wallet-sdk-web';

(async () => {
  // Builds the Wallet SDK object
  const sdk = await WalletSDK.build({
    env: ENVIRONMENTS.STAGING,
    /*
      RPC config is only required if the WalletConnect provider (L1_PROVIDERS.WALLET_CONNECT)
      is being used. Follow this reference for the RPC config:
      https://docs.walletconnect.com/quick-start/dapps/web3-provider#provider-options
    */
    rpc: {
      3: 'https://ropsten.mycustomnode.com',
    },
    /*
      Will switch the chain based on this configured chainID when connecting to the wallet.(Optional)
      Following the table below to get the chainID and name mapping. 
      Consult https://chainlist.org/ for more.
      ChainId	| Network
      --- --- | --- --- 
      1	      | Ethereum Main Network (Mainnet)
      3	      | Ropsten Test Network
      5	      | Goerli Test Network
    */
    chainID: 3,
  });

  // Connects on the chosen provider - WalletConnect
  const walletConnection = await sdk.connect({ provider: L1_PROVIDERS.WALLET_CONNECT });
  // For Metamask:
  // const walletConnection = await sdk.connect({ provider: L1_PROVIDERS.METAMASK });
})();
```

#### Wallet SDK Android
<!-- From [here](https://docs.x.immutable.com/sdk-docs/wallet-sdk-android/quickstart#connect-via-walletconnect). -->

MetaMask and Rainbow can be connected using this WalletConnect provider.

```java
ImmutableXWallet.connect(
    Provider.WalletConnect(
        appUrl = "https://www.marketplace.com/",
        appName = "My NFT Marketplace",
        appDescription = "This is a marketplace where all my favorite NFTs can be traded.",
        appIcons = listOf("http://www.marketplace.com/appicon.svg")
    )
)
```
If you want to use your own bridge server instead of the default provide it via bridgeServerUrl when connecting. For more info on how WalletConnect and the bridge works [see here](https://docs.walletconnect.com/tech-spec).

### Using the get-starknet library
Use the [get-starknet](https://github.com/starknet-community-libs/get-starknet) library to implement user wallet connections.