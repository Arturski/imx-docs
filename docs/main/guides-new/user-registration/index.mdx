---
title: "User registration"
slug: "/guides-new/user-registration"
keywords: [imx-wallets, imx-dx]
---

Only users on the [StarkEx settlement layer](#) need to be registered.

## What is user registration?

In order for a user to be registered, they first need an existing L1 wallet.

Then it consists of 2 main steps:
1. Generating an L2 wallet for the user based on the keys of their L1 wallet
2. Registering the L1-L2 wallet pair (recording that the L1 and L2 wallets are associated with each other either)

### On-chain vs off-chain registration
**On-chain** registration means recording the L1-L2 wallet pair on Ethereum (L1).

**Off-chain** registration is when the L1-L2 wallet pair is recorded in an Immutable database. All transactions that the user performs on L2 are recorded against this registered L2 user, however, L1 is not yet aware of the wallet mapping.

By default, Immutable's API and libraries provide for off-chain registration when a user is first registered. Then, when the users performs a transaction that requires an update of the state of the corresponding L1 wallet (ie. withdrawing an NFT from the L2 wallet to the L1 wallet), the user is registered on-chain.

## Why do you need to register users?

The L1-L2 mapping of user wallets needs to occur so that users can transfer assets between their L1 and L2 wallets (also known as "bridging").

## Guides
Only users on the StarkEx settlement layer need to be registered.

#### Pre-requisites:
* [User signatures](/docs/guides-new/user-signatures)

<table>
  <tbody>
    <tr>
      <th>Settlement layer</th>
      <th>Guides</th>
    </tr>
    <tr>
      <td>StarkEx</td>
      <td>
        <ul>
          <li><a href='/docs/guides-new/user-registration/api'>API</a></li>
          <li><a href='/docs/guides-new/user-registration/typescript'>Typescript</a></li>
          <li><a href='/docs/guides-new/user-registration/link'>Typescript (with wallet UI - Link SDK)</a></li>
          <li><a href='/docs/guides-new/user-registration/kotlin-jvm'>Kotlin</a></li>
          <li><a href='/docs/guides-new/user-registration/swift'>Swift</a></li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

## Typescript
From [here](https://docs.x.immutable.com/sdk-docs/core-sdk-ts/workflows).

```ts
import { Workflows, getConfig } from '@imtbl/core-sdk';

// Sets up the Core SDK workflows
const coreSdkConfig = getConfig({
  // Example contract addresses
  coreContractAddress: '0x4527BE8f31E2ebFbEF4fCADDb5a17447B27d2aef',
  registrationContractAddress: '0x6C21EC8DE44AE44D0992ec3e2d9f1aBb6207D864',
  chainID: 3,
  basePath:  'https://api.ropsten.x.immutable.com',
});
const coreSdkWorkflows = new Workflows(coreSdkConfig);

// Registers the user
await coreSdkWorkflows.registerOffchain(walletConnection);
```

## Kotlin (JVM)

```kotlin
// Get L1 and L2 signers (see 'Obtaining user signatures' step)

// Register user
ImmutableXCore.registerOffchain(L1Signer, L2Signer)
```

## Swift

```swift
// Get L1 and L2 signers (see 'Obtaining user signatures' step)

// Register user
ImmutableXCore.registerOffchain(L1Signer, L2Signer)
```

## Link
See [Link.setup](https://docs.x.immutable.com/docs/link-setup) guide.

## API
```typescript
// Provide instructions on how to get the params for regiserUser endpoint
const registerUserParams = {
  email: 'email',
  eth_signature: 'eth sig',
  ether_key: 'ether key string',
  stark_key: 'stark key',
  stark_signature: 'stark sig',
}

// Call registerUser endpoint with params object
```
