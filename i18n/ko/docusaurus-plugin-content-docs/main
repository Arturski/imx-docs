---
id: 'trading-assets'
title: 'Asset Trading'
slug: '/trading-assets'
sidebar_position: 7
keywords:
  - imx-games
---

To build a marketplace that supports trading of ImmutableX assets, you need to:

- 이뮤터블 X의 오더북 API를 사용해 현재 판매 중인 자산을 표시합니다.
- 링크 SDK를 사용해 사용자의 행동을 유도합니다.

If you haven't already, you should also learn about supporting ImmutableX assets in your application. [자산 소유](./asset-ownership.mdx)를 참조하십시오.

## 중앙 오더북

이뮤터블은 유동성을 촉진하기 위해 이뮤터블 X의 API를 통해 모든 애플리케이션이 즉시 접근할 수 있는 중앙 오더북을 유지합니다. 중앙 오더북에 사용자의 오더를 추가하면 다른 어떤 클라이언트 애플리케이션으로도 오더를 작성할 수 있어 이러한 오더들에서 수수료를 얻을 확률이 높아집니다.

이 오더북의 API는 다음과 같습니다.

- [다수 오더 획득](/reference#/operations/listOrders)
- [단일 오더 획득](/reference#/operations/getOrder)
- [오더 생성](/reference#/operations/createOrder)
- [오더 취소](/reference#/operations/cancelOrder)

Currently, ImmutableX doesn't support updating existing orders, only cancellation and replacement. :::info 만기 타임스탬프 형식  
포스트 콜의 일부로 오더 API에 expiration_timestamp를 전달할 때는 시간을 Unix 타임스탬프로 전환해야 합니다.

Unix 에포크(또는 Unix 시간 또는 POSIX 시간 또는 Unix 타임스탬프)는 윤초를 세지 않고 않고 1970년 1월 1일(UTC/GMT 자정)부터 경과한 초 수입니다(ISO 8601: 1970-01-01T00:00:00Z). 에포크는 문자 그대로 Unix 시간의 0(1970년 1월 1일 자정)을 의미하지만 '에포크'는 종종 Unix 시간의 동의어로 사용되기도 합니다. 어떤 시스템들은 에포크 날짜를 부호 있는 32 비트 정수로 저장하는데, 이는 2038년 1월 19일에 문제를 야기할 수 있습니다(2038년 문제 또는 Y2038 문제로 알려짐). 이 페이지의 컨버터는 타임스탬프를 초 단위(10자릿수), 밀리초(13자릿수), 마이크로초(16자릿수)의 읽기 가능한 데이터로 전환합니다.
:::

## 거래 제출하기

L2에서 두 오더를 매칭했다면 [거래 생성](/reference#/operations/createTrade) 엔드 포인트를 사용하여 그 오더를 직접 API에 제출할 수 있습니다. 이러한 거래는 여전히 관련 사용자가 서명해야 한다는 점에 유의하십시오.

## 이뮤터블 링크(Immutable Link)

ImmutableX allows users to keep their existing Ethereum wallet: no installations, upgrades or changes required.

To ensure that users are able to sign trades which can be processed by ImmutableX, and to ensure that applications display the correct assets to users and provide them with informed consent, Immutable provides a bridging service called **Immutable Link**. This service uses a signed security string to derive a STARK-friendly ImmutableX key, which the user will use to sign L2 interactions. 이는 사용자가 자신의 이더리움 지갑에 접근권을 보유하는 한 언제든 자산을 되찾을 수 있도록 해줍니다.

이뮤터블 링크는 별도의 웹 애플리케이션으로, 현재 iframe 지원을 제공하며 [더 자세한 정보는 여기](../link-sdk/link-iframe-support.md)에서 확인할 수 있습니다. All StarkEx-specific ImmutableX interactions are abstracted away from your marketplace and into Immutable Link.

이뮤터블 링크는 곧 오픈 소스로 공개되어 사용할 수 있게 될 것입니다.

## 링크 SDK(Link SDK)

Immutable provides a convenient interface for initiating Immutable Link actions in the form of a TypeScript SDK. 프로젝트에 SDK를 설치하려면 다음을 사용하십시오.

```bash title="SDK Installation"
npm install @imtbl/imx-link-sdk
```

This SDK allows users to prompt the Immutable Link window using a simple set of TypeScript functions (draft interface presented below):

```typescript title="SDK Interface"
interface ETH {
  amount: string;
}

interface ERC20 {
  contract: string;
  amount: string;
}

interface ERC721 {
  contract: string;
  token_id: string;
}

type Asset = ETH | ERC20 | ERC721;

interface Order {
  user: string;
  buy: Asset;
  sell: Asset;
}

interface ETHTxResponse {
  rejectedSignature: boolean;
  rejectedLink: boolean;
  txhash: string;
}

interface ImXTxResponse {
  id: string;
  success: boolean;
}

class Link {
  public deposit(user: string, assets: Array<Asset>): Promise<ETHTxResponse>;
  public withdraw(user: string, assets: Array<Asset>): Promise<ETHTxResponse>;
  public transfer(
    user: string,
    to: string,
    assets: Array<Asset>
  ): Promise<ImXTxReponse>;
  public fill(user: string, orderIDs: Array<string>): Promise<ImXTxReponse>;
  public order(
    user: string,
    orders: Array<Order>,
    broadcast = true
  ): Promise<ImXTxReponse>;
}
```

거래 과정의 고급 개요는 다음과 같습니다.![거래하기](/img/Trading.png)

## 예시

이 작동 방식을 이해하려면 마켓플레이스를 축이라고 생각해야 합니다.

먼저 마켓플레이스가 [다중 오더 획득](/reference#/operations/listOrders) 엔드 포인트를 사용해 액티브한 오더 리스트를 로드합니다. 구매자는 3 ETH에 Mystic Axie 구매를 결정합니다. 마켓플레이스는 [Link SDK](../link-sdk/index.md)를 사용해 링크를 프롬프트합니다.

그 후 링크는 [오더 세부 내역 획득](/reference#/operations/getOrder) 엔드 포인트를 사용해 사용자가 서명하는 데 필요한 매개 변수를 가져옵니다. The user will sign the order, and the Link will use the [submit order](/reference#/operations/createOrder) endpoint to send it to ImmutableX.

그러면 거래소가 거래를 확인하거나 거부하고 링크에 알립니다. 링크는 `ImXTxResponse`를 마켓플레이스에 다시 전송하고, 그러면 마켓플레이스가 거래의 성공 또는 실패를 사용자에게 표시할 수 있습니다. Axie Infinity가 [자산 소유를 지원](./asset-ownership.mdx)한다면 자산은 Axie Infinity 내에서 _즉시_ 거래 또는 사용될 수 있습니다.

## 자주 묻는 질문

_1. 옥션 플로우 기능이 있나요?_

현재 옥션 플로우 기능은 아직 지원되지 않습니다. 이후 지원 예정입니다.

_2. 이뮤터블에서 거래가 일어나면 어떤 일이 발생하나요? 애플리케이션 인벤토리를 조정하기 위해 서버로 전달되는 콜백이 있나요?_

현재 이뮤터블 X는 당사의 /mints, /tranfers, /trades API를 정기적인 간격으로 폴링할 것을 권장합니다. 웹훅/소켓은 향후에 설정할 것입니다.

_3. NFT가 거래될 때마다 스마트 컨트랙트가 활용되도록 하려면 어떻게 해야 하나요?_

NFT 거래시 스마트 컨트랙트의 활용을 보장하려면, 사용자 간의 직접 전송을 금지해야 합니다. Best way to combat this is providing the best place to trade and ensuring it’s within ImmutableX.
